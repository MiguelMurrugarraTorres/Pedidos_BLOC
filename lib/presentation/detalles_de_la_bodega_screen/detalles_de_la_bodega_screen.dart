import 'bloc/detalles_de_la_bodega_bloc.dart';import 'dart:async';import 'models/detalles_de_la_bodega_model.dart';import 'package:flutter/material.dart';import 'package:google_maps_flutter/google_maps_flutter.dart';import 'package:pedidos/core/app_export.dart';import 'package:pedidos/presentation/pedidos_detalle_page/pedidos_detalle_page.dart';import 'package:pedidos/widgets/custom_bottom_bar.dart';import 'package:pedidos/widgets/custom_elevated_button.dart';import 'package:pedidos/widgets/custom_icon_button.dart';import 'package:pedidos/presentation/mas_detalles_de_ruta_bottomsheet/mas_detalles_de_ruta_bottomsheet.dart';
// ignore_for_file: must_be_immutable
class DetallesDeLaBodegaScreen extends StatelessWidget {DetallesDeLaBodegaScreen({Key? key}) : super(key: key);

Completer<GoogleMapController> googleMapController = Completer();

GlobalKey<NavigatorState> navigatorKey = GlobalKey();

static Widget builder(BuildContext context) { return BlocProvider<DetallesDeLaBodegaBloc>(create: (context) => DetallesDeLaBodegaBloc(DetallesDeLaBodegaState(detallesDeLaBodegaModelObj: DetallesDeLaBodegaModel()))..add(DetallesDeLaBodegaInitialEvent()), child: DetallesDeLaBodegaScreen()); } 
@override Widget build(BuildContext context) { return BlocBuilder<DetallesDeLaBodegaBloc, DetallesDeLaBodegaState>(builder: (context, state) {return SafeArea(child: Scaffold(extendBody: true, extendBodyBehindAppBar: true, body: Container(width: SizeUtils.width, height: SizeUtils.height, decoration: BoxDecoration(color: appTheme.whiteA700, image: DecorationImage(image: AssetImage(ImageConstant.imgGroup634), fit: BoxFit.cover)), child: Container(height: 787.v, width: double.maxFinite, padding: EdgeInsets.symmetric(horizontal: 7.h), child: Stack(alignment: Alignment.bottomCenter, children: [Align(alignment: Alignment.topLeft, child: Container(height: 50.adaptSize, width: 50.adaptSize, margin: EdgeInsets.only(left: 91.h, top: 334.v), padding: EdgeInsets.all(8.h), decoration: AppDecoration.outlineBlueA.copyWith(borderRadius: BorderRadiusStyle.roundedBorder27), child: CustomIconButton(height: 32.adaptSize, width: 32.adaptSize, padding: EdgeInsets.all(6.h), decoration: IconButtonStyleHelper.fillPrimary, alignment: Alignment.center, child: CustomImageView(imagePath: ImageConstant.imgDeliveryCar)))), Align(alignment: Alignment.bottomCenter, child: Container(padding: EdgeInsets.symmetric(horizontal: 15.h, vertical: 46.v), decoration: BoxDecoration(borderRadius: BorderRadiusStyle.customBorderTL15), child: Column(mainAxisSize: MainAxisSize.min, crossAxisAlignment: CrossAxisAlignment.start, children: [_buildArrowLeftRow(context), SizedBox(height: 10.v), Padding(padding: EdgeInsets.only(left: 6.h), child: Text("msg_detalles_cliente".tr, style: TextStyle(color: theme.colorScheme.primary, fontSize: 16.fSize, fontFamily: 'Raleway', fontWeight: FontWeight.w900))), SizedBox(height: 15.v), Padding(padding: EdgeInsets.only(left: 13.h), child: Row(children: [CustomImageView(imagePath: ImageConstant.img5954142, height: 51.v, width: 56.h), Padding(padding: EdgeInsets.only(left: 12.h, top: 2.v), child: Column(crossAxisAlignment: CrossAxisAlignment.start, children: [Text("lbl_mass_s_a_c".tr, style: TextStyle(color: appTheme.pink300, fontSize: 18.fSize, fontFamily: 'Raleway', fontWeight: FontWeight.w800)), SizedBox(height: 7.v), Row(children: [CustomImageView(imagePath: ImageConstant.imgCarGray600, height: 12.v, width: 15.h, margin: EdgeInsets.only(top: 1.v, bottom: 3.v)), Padding(padding: EdgeInsets.only(left: 8.h), child: Text("lbl_5_min".tr, style: TextStyle(color: appTheme.gray600, fontSize: 14.fSize, fontFamily: 'Raleway', fontWeight: FontWeight.w600)))])]))])), SizedBox(height: 6.v), Padding(padding: EdgeInsets.only(left: 13.h), child: Text("lbl_contacto".tr, style: TextStyle(color: theme.colorScheme.primary, fontSize: 15.fSize, fontFamily: 'Raleway', fontWeight: FontWeight.w700))), SizedBox(height: 2.v), Padding(padding: EdgeInsets.only(left: 13.h), child: Text("lbl_cesar_alex".tr, style: TextStyle(color: appTheme.pink300, fontSize: 14.fSize, fontFamily: 'Raleway', fontWeight: FontWeight.w600))), SizedBox(height: 6.v), Padding(padding: EdgeInsets.only(left: 13.h), child: Text("lbl_direccion".tr, style: TextStyle(color: theme.colorScheme.primary, fontSize: 15.fSize, fontFamily: 'Raleway', fontWeight: FontWeight.w700))), SizedBox(height: 6.v), Padding(padding: EdgeInsets.only(left: 13.h), child: Text("msg_jir_n_tomasal_145".tr, style: TextStyle(color: appTheme.pink300, fontSize: 14.fSize, fontFamily: 'Raleway', fontWeight: FontWeight.w600))), SizedBox(height: 11.v), Padding(padding: EdgeInsets.only(left: 13.h), child: Text("lbl_referencia".tr, style: TextStyle(color: theme.colorScheme.primary, fontSize: 15.fSize, fontFamily: 'Raleway', fontWeight: FontWeight.w700))), SizedBox(height: 5.v), Padding(padding: EdgeInsets.only(left: 13.h), child: Text("lbl_jiron_tomasal".tr, style: TextStyle(color: appTheme.pink300, fontSize: 14.fSize, fontFamily: 'Raleway', fontWeight: FontWeight.w600))), SizedBox(height: 38.v), Align(alignment: Alignment.centerRight, child: Padding(padding: EdgeInsets.only(left: 50.h, right: 30.h), child: Row(mainAxisAlignment: MainAxisAlignment.end, children: [CustomElevatedButton(height: 39.v, width: 142.h, text: "lbl_realizar_pedido".tr, buttonStyle: CustomButtonStyles.fillPrimaryTL5, onPressed: () {onTapRealizarPedido(context);}), CustomElevatedButton(height: 39.v, width: 142.h, text: "lbl_ver_perfil".tr, margin: EdgeInsets.only(left: 20.h), buttonStyle: CustomButtonStyles.fillPrimaryTL5, onPressed: () {onTapVerPerfil(context);})]))), SizedBox(height: 77.v)]))), _buildMap(context)]))), bottomNavigationBar: Padding(padding: EdgeInsets.symmetric(horizontal: 7.h), child: _buildBottomBar(context))));}); } 
/// Section Widget
Widget _buildArrowLeftRow(BuildContext context) { return Row(children: [CustomIconButton(height: 44.adaptSize, width: 44.adaptSize, padding: EdgeInsets.all(10.h), decoration: IconButtonStyleHelper.outlineGrayF, onTap: () {onTapBtnArrowLeft(context);}, child: CustomImageView(imagePath: ImageConstant.imgArrowLeft)), Padding(padding: EdgeInsets.only(left: 112.h), child: CustomIconButton(height: 45.adaptSize, width: 45.adaptSize, padding: EdgeInsets.all(12.h), child: CustomImageView(imagePath: ImageConstant.imgCall))), Padding(padding: EdgeInsets.only(left: 16.h), child: CustomIconButton(height: 45.adaptSize, width: 45.adaptSize, padding: EdgeInsets.all(12.h), child: CustomImageView(imagePath: ImageConstant.imgLockOrange300))), Padding(padding: EdgeInsets.only(left: 16.h), child: CustomIconButton(height: 45.adaptSize, width: 45.adaptSize, padding: EdgeInsets.all(11.h), child: CustomImageView(imagePath: ImageConstant.imgVolume))), Padding(padding: EdgeInsets.only(left: 16.h), child: CustomIconButton(height: 45.adaptSize, width: 45.adaptSize, padding: EdgeInsets.all(8.h), onTap: () {onTapBtnVideoCamera(context);}, child: CustomImageView(imagePath: ImageConstant.imgVideoCamera)))]); } 
/// Section Widget
Widget _buildMap(BuildContext context) { return Container(height: 330.v, width: 364.h, margin: EdgeInsets.only(top: 18.v), child: GoogleMap(mapType: MapType.normal, initialCameraPosition: CameraPosition(target: LatLng(37.43296265331129, -122.08832357078792), zoom: 14.4746), onMapCreated: (GoogleMapController controller) {googleMapController.complete(controller);}, zoomControlsEnabled: false, zoomGesturesEnabled: false, myLocationButtonEnabled: false, myLocationEnabled: false)); } 
/// Section Widget
Widget _buildBottomBar(BuildContext context) { return CustomBottomBar(onChanged: (BottomBarEnum type) {Navigator.pushNamed(navigatorKey.currentContext!, getCurrentRoute(type));}); } 
///Handling route based on bottom click actions
String getCurrentRoute(BottomBarEnum type) { switch (type) {case BottomBarEnum.Home: return AppRoutes.pedidosDetallePage; case BottomBarEnum.Rutas: return "/"; case BottomBarEnum.Courses: return "/"; case BottomBarEnum.Cobrar: return "/"; case BottomBarEnum.Clientes: return "/"; default: return "/";} } 
///Handling page based on route
Widget getCurrentPage(BuildContext context, String currentRoute, ) { switch (currentRoute) {case AppRoutes.pedidosDetallePage: return PedidosDetallePage.builder(context); default: return DefaultWidget();} } 

/// Displays a bottom sheet widget using the [showModalBottomSheet] method 
/// of the [Scaffold] class with [isScrollControlled] set to true.
///
/// The bottom sheet is built using the [MasDetallesDeRutaBottomsheet]
/// class and the [builder] method of the bottom sheet is passed the
/// [BuildContext] object.
onTapBtnArrowLeft(BuildContext context) { showModalBottomSheet(context: context, builder: (_)=>MasDetallesDeRutaBottomsheet.builder(context),isScrollControlled: true); } 
/// Navigates to the reportarProblemaScreen when the action is triggered.
onTapBtnVideoCamera(BuildContext context) { NavigatorService.pushNamed(AppRoutes.reportarProblemaScreen, ); } 
/// Navigates to the pedidosDetalleContainerScreen when the action is triggered.
onTapRealizarPedido(BuildContext context) { NavigatorService.pushNamed(AppRoutes.pedidosDetalleContainerScreen, ); } 
/// Navigates to the detalleTiendaClientesScreen when the action is triggered.
onTapVerPerfil(BuildContext context) { NavigatorService.pushNamed(AppRoutes.detalleTiendaClientesScreen, ); } 
 }
